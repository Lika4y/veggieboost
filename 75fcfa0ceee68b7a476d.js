import"./index.html";import"./index.scss";import clickOnHeaderMenu from"./handlers/clickOnHeaderMenu";import IMask from"imask";const openMenuClick=document.querySelector(".header-menu"),headerNavList=document.querySelector(".header-nav"),mainTag=document.querySelector(".main");openMenuClick.addEventListener("click",(()=>{openMenuClick.classList.toggle("header-menu--open"),clickOnHeaderMenu(openMenuClick,mainTag),headerNavList.classList.toggle("header-nav-selected-menu")}));let links=document.getElementsByTagName("a"),arrLinks=[...links];arrLinks.forEach((e=>e.addEventListener("click",(t=>{e.href.startsWith("tel:")||t.preventDefault()}))));const input=document.querySelector(".recall-input"),recall=document.querySelector(".recall-button"),mask=new IMask(input,{mask:"+{38\\0}(00)000-00-00",lazy:!1});function phoneInputHandler(){mask.masked.isComplete?recall.classList.add("recall-button--active"):recall.classList.remove("recall-button--active"),recall.classList.contains("recall-button--active")?recall.removeAttribute("disabled"):recall.setAttribute("disabled",!0)}function recallHandler(){console.log(`Ready! We will contact you soon by phone number ${mask.value}`),mask.value="",recall.classList.remove("recall-button--active")}recall.addEventListener("click",recallHandler),input.addEventListener("input",phoneInputHandler);let orderBtn=document.querySelector(".catalog-button"),closePopUpBtn=document.querySelector(".order-pop-up-close"),popup=document.querySelector(".order-pop-up");orderBtn.addEventListener("click",(()=>{popup.style.display="block",document.body.style.overflow="hidden"})),closePopUpBtn.addEventListener("click",(()=>{popup.style.display="none",document.body.style.overflow="auto"}));const form=document.querySelector(".order-pop-up-form");let fields={fullName:{input:document.querySelector(".order-pop-up-form__item--full-name"),error:document.querySelector("#full-name + span.order-pop-up-form__item--error"),messages:{valueMissing:"Please enter your full name.",patternMismatch:"Enter the full name separated by a space. Only letters are allowed."}},mail:{input:document.querySelector(".order-pop-up-form__item--email"),error:document.querySelector("#email + span.order-pop-up-form__item--error"),messages:{valueMissing:"The email address must be completed.",typeMismatch:"This doesn't look like the correct email."}},card:{input:document.querySelector(".order-pop-up-form__item--card"),error:document.querySelector("#card + span.order-pop-up-form__item--error"),messages:{valueMissing:"Enter your card number consisting of 16 digits.",patternMismatch:"Must be 16 digits. Enter numbers only."}}};function validateField(e){let t=e.input,r=e.error;t.addEventListener("input",(()=>{t.validity.valid?(r.textContent="Good!",r.className="order-pop-up-form__item--error active-true",t.title=""):showError(t,r,e.messages)})),form.addEventListener("submit",(o=>{t.validity.valid||(showError(t,r,e.messages),o.preventDefault())}))}function showError(e,t,r){e.validity.valueMissing?t.textContent=r.valueMissing:e.validity.typeMismatch||e.validity.patternMismatch?t.textContent=r.typeMismatch||r.patternMismatch:t.textContent="",t.className="order-pop-up-form__item--error active"}for(let e in fields)validateField(fields[e]);